(function(e){function t(t){for(var a,r,o=t[0],c=t[1],l=t[2],u=0,p=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(p.length)p.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],a=!0,o=1;o<s.length;o++){var c=s[o];0!==i[c]&&(a=!1)}a&&(n.splice(t--,1),e=r(r.s=s[0]))}return e}var a={},i={app:0},n=[];function r(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=a,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(s,a,function(t){return e[t]}.bind(null,a));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=c;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"06c7":function(e,t,s){},"0e7c":function(e,t,s){"use strict";s("9c7f")},"13ef":function(e,t,s){"use strict";s("f5a0")},"335b":function(e,t,s){"use strict";s("f651")},"55ba":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container grid-xl",attrs:{id:"installer-container"}},[s("div",{attrs:{id:"installer"}},[s("Sidebar"),s("div",{staticClass:"content"},[s("transition-group",{attrs:{name:"fade"}},[s("Introduction",{directives:[{name:"show",rawName:"v-show",value:e.isStepActive("intro"),expression:"isStepActive('intro')"}],key:"intro"}),s("Checks",{directives:[{name:"show",rawName:"v-show",value:e.isStepActive("checks"),expression:"isStepActive('checks')"}],key:"checks",attrs:{installation:e.installation}}),s("License",{directives:[{name:"show",rawName:"v-show",value:e.isStepActive("license"),expression:"isStepActive('license')"}],key:"license"}),s("Configuration",{directives:[{name:"show",rawName:"v-show",value:e.isStepActive("config"),expression:"isStepActive('config')"}],key:"config",attrs:{site:e.site,installation:e.installation}}),s("FinalChecks",{directives:[{name:"show",rawName:"v-show",value:e.isStepActive("finalChecks"),expression:"isStepActive('finalChecks')"}],key:"finalChecks",attrs:{site:e.site}}),s("Installation",{directives:[{name:"show",rawName:"v-show",value:e.isStepActive("installation"),expression:"isStepActive('installation')"}],key:"installation",attrs:{site:e.site,installation:e.installation}}),s("Complete",{directives:[{name:"show",rawName:"v-show",value:e.isStepActive("complete"),expression:"isStepActive('complete')"}],key:"complete",attrs:{site:e.site}})],1)],1)],1)])},n=[],r=(s("a9e3"),s("ac1f"),s("5319"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"sidebar"}},[e._m(0),s("div",{staticClass:"step-links"},e._l(e.steps,(function(t,a){return s("a",{key:a,class:e.stepClasses(t),attrs:{href:"#"},domProps:{textContent:e._s(t.name)},on:{click:function(s){return s.preventDefault(),e.onClick(t)}}})})),0)])}),o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logo"},[a("img",{attrs:{src:s("5971"),alt:"Winter CMS"}})])}],c=(s("a15b"),s("2f62")),l={name:"Sidebar",computed:Object(c["b"])({steps:function(e){return e.steps.steps}}),methods:{stepClasses:function(e){var t=["step-link"];return e.active&&t.push("active"),"locked"===e.status&&t.push("locked"),"failed"===e.status&&t.push("failed"),"complete"===e.status&&t.push("complete"),t.join(" ")},onClick:function(e){this.$store.getters["steps/isLocked"](e.id)||this.$store.getters["steps/isActive"](e.id)||this.$store.dispatch("steps/goTo",{id:e.id})}}},d=l,u=(s("f203"),s("2877")),p=Object(u["a"])(d,r,o,!1,null,null,null),m=p.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"step text-center"},[e._m(0),s("div",{staticClass:"step-actions"},[s("Click",{attrs:{label:"Begin compatibility checks",flag:"primary"},on:{press:e.complete}})],1)])},f=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"step-content"},[s("div",{staticClass:"circle-logo"}),s("h3",[e._v("Welcome to the Winter CMS Installer.")]),s("p",[e._v(" Thanks for choosing Winter CMS as your development platform, get ready to enjoy development again! ")]),s("p",[e._v(" This installer will guide you through the process of installing a fresh copy of Winter CMS for your project. Please follow the instructions provided and fill in all necessary information. ")])])}],b={computed:{isActive:function(){return this.$store.getters["steps/isActive"](this.stepId)}},data:function(){return{stepId:"step",stepName:"Step"}},created:function(){this.$store.dispatch("steps/add",{id:this.stepId,name:this.stepName})},destroyed:function(){this.$store.dispatch("steps/remove",{id:this.stepId})}},v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{ref:"button",class:e.buttonClasses,attrs:{type:e.type,role:"button","aria-pressed":e.pressed,"aria-label":e.label,disabled:e.disabled},on:{mousedown:function(t){return t.stopPropagation(),e.click.apply(null,arguments)},mouseup:function(t){return t.stopPropagation(),e.unclick.apply(null,arguments)}}},[s("span",{staticClass:"button-label",domProps:{textContent:e._s(e.label)}})])},g=[],k={name:"Click",props:{type:{type:String,default:"button",validator:function(e){return-1!==["button","submit","reset"].indexOf(e)}},label:{type:String,required:!0},flag:{type:String,default:"default",validator:function(e){return-1!==["primary","secondary","error","warning","success","default","info","link"].indexOf(e)}},size:{type:String,default:"md",validator:function(e){return-1!==["xs","sm","md","lg","xl"].indexOf(e)}},block:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},addClasses:{type:String}},data:function(){return{mounted:!1,hovered:!1,pressed:!1}},computed:{buttonClasses:function(){var e=["btn-".concat(this.size),"btn-".concat(this.flag)];return this.disabled&&e.push("btn-disabled"),this.block&&e.push("btn-block"),this.pressed&&e.push("pressed"),this.addClasses&&e.push(this.addClasses),e.join(" ")}},mounted:function(){this.mounted=!0},destroyed:function(){this.mounted=!1},methods:{click:function(){this.disabled||!1===this.pressed&&(this.pressed=!0)},unclick:function(){this.disabled||!0===this.pressed&&(this.pressed=!1,this.$emit("press"))}}},C=k,y=(s("8745"),Object(u["a"])(C,v,g,!1,null,"4c69abf6",null)),w=y.exports,S={name:"Introduction",mixins:[b],components:{Click:w},data:function(){return{stepId:"intro",stepName:"Introduction"}},methods:{complete:function(){this.$store.dispatch("steps/setStatus",{id:"intro",status:"complete"}),this.$store.dispatch("steps/goTo",{id:"checks"})}}},_=S,P=(s("335b"),Object(u["a"])(_,h,f,!1,null,"e5407802",null)),x=P.exports,A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"step"},[e._m(0),s("div",{staticClass:"checks"},[s("Check",{attrs:{name:"API Connection",description:e.checkDescription("api"),status:e.checkStatus("api")},scopedSlots:e._u([e.secureError?{key:"action",fn:function(){return[s("Click",{attrs:{label:e.disablingSSLChecks?"Ignoring...":"Ignore SSL errors",flag:"error",disabled:e.disablingSSLChecks},on:{press:e.ignoreSSLErrors}})]},proxy:!0}:null],null,!0)}),s("Check",{attrs:{name:"PHP Version",description:e.checkDescription("phpVersion"),status:e.checkStatus("phpVersion")}}),s("Check",{attrs:{name:"PHP Extensions",description:e.checkDescription("phpExtensions"),status:e.checkStatus("phpExtensions")}})],1),s("div",{staticClass:"step-actions"},[s("Click",{attrs:{label:e.buttonLabel,flag:e.completedChecks&&!e.checksSuccessful?"error":"primary",disabled:!e.completedChecks},on:{press:e.onPress}})],1)])},T=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"step-content"},[s("h4",[e._v("We're now running a couple of checks.")]),s("p",[e._v("To ensure that Winter CMS can install and run on your web server, we're just doing a couple of checks of your PHP and server configuration.")])])}],E=(s("a4d3"),s("e01a"),s("d3b7"),s("3ca3"),s("ddb0"),s("159b"),s("b64b"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"check",class:e.status},[s("div",{staticClass:"name",domProps:{textContent:e._s(e.name)}}),"loading"===e.status?s("div",{staticClass:"loading"}):s("div",{staticClass:"icon"}),s("div",{staticClass:"description",domProps:{textContent:e._s(e.description)}}),e._t("action")],2)}),O=[],N={name:"Check",props:{name:{type:String,required:!0},description:{type:String,required:!0},status:{type:String,default:"loading"}}},$=N,I=(s("ba36"),Object(u["a"])($,E,O,!1,null,"3fa62dba",null)),j=I.exports,L={name:"Checks",mixins:[b],components:{Click:w,Check:j},props:{installation:{type:Object,required:!0}},computed:{buttonLabel:function(){return this.completedChecks?this.checksSuccessful?"Continue installation":"Re-run checks":"Running checks..."},isActive:function(){return this.$store.getters["steps/isActive"](this.stepId)}},data:function(){return{stepId:"checks",stepName:"System Checks",ranChecks:!1,completedChecks:!1,checksSuccessful:!1,checks:{},secureError:!1,disablingSSLChecks:!1}},mounted:function(){this.resetChecks()},watch:{isActive:function(e){e&&!this.ranChecks&&this.runChecks()}},methods:{checkDescription:function(e){return this.checks[e]?this.checks[e].description:""},checkStatus:function(e){return this.checks[e]&&null!==this.checks[e].status?!1===this.checks[e].status?"error":"success":"loading"},runChecks:function(){var e=this;this.ranChecks=!0,Promise.all([this.$api("GET","checkApi"),this.$api("GET","checkPhpVersion"),this.$api("GET","checkPhpExtensions")]).then((function(t){e.completedChecks=!0,e.checksSuccessful=t.every((function(e){return!0===e.success})),e.checks.api.status=t[0].success,e.checks.phpVersion.status=t[1].success,e.checks.phpExtensions.status=t[2].success,e.installation.installPath=t[1].data.installPath||null,t[0].success?e.checks.api.description="Your server is able to connect to the Winter CMS Marketplace API.":"Unable to verify SSL certificate or connection"===t[0].error?(e.checks.api.description="A secure connection could not be established with the Winter CMS Marketplace API.",e.secureError=!0):e.checks.api.description="Your server could not connect to the Winter CMS Marketplace API.",t[1].success?e.checks.phpVersion.description="You are running PHP version ".concat(t[1].data.detected,", which is compatible with Winter CMS."):e.checks.phpVersion.description="You are running PHP version ".concat(t[1].data.detected,", which is incompatible with Winter CMS."),t[2].success?e.checks.phpExtensions.description="All the necessary PHP extensions required to run Winter CMS are installed on your server.":e.checks.phpExtensions.description='You are missing the "'.concat(t[2].data.extension,'", which is required in order to run Winter CMS. Please install it on your server and re-run the tests.')}),(function(){e.completedChecks=!0,Object.keys(e.checks).forEach((function(t){e.checks[t].status=!1,e.checks[t].description="An error occurred querying the installer's PHP API. We cannot complete this check. Please double-check that your server has PHP installed and is web-accessible."}))}))},onPress:function(){this.checksSuccessful?this.complete():this.rerunChecks()},rerunChecks:function(){this.ranChecks=!1,this.completedChecks=!1,this.checksSuccessful=!1,this.secureError=!1,this.disablingSSLChecks=!1,this.resetChecks(),this.runChecks()},resetChecks:function(){this.checks={api:{status:null,description:"Check that we can connect to the Winter CMS Marketplace API to retrieve the installation files."},phpVersion:{status:null,description:"Check that your server is running at least PHP version 7.2.9."},phpExtensions:{status:null,description:"Check that all necessary PHP extensions are installed on your server."}}},complete:function(){this.$store.dispatch("steps/setStatus",{id:"checks",status:"complete"}),this.$store.dispatch("steps/goTo",{id:"license"})},ignoreSSLErrors:function(){var e=this;this.disablingSSLChecks=!0,this.$api("POST","ignoreCerts",{}).then((function(t){t.success?e.rerunChecks():(e.disablingSSLChecks=!1,e.secureError=!1,e.checks.api.description="We are unable to disable SSL checks.")}),(function(){e.disablingSSLChecks=!1,e.secureError=!1,e.checks.api.description="We are unable to disable SSL checks."}))}}},q=L,R=(s("f54a"),Object(u["a"])(q,A,T,!1,null,"bc650182",null)),U=R.exports,M=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"step"},[e._m(0),s("pre",{staticClass:"license"},[e._v('MIT License\n\nCopyright (c) 2013-2021.03.01 October CMS\nCopyright (c) 2021 Winter CMS\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the "Software"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n    ')]),s("div",{staticClass:"step-actions"},[s("Click",{attrs:{label:"I accept, let's do this!",flag:"primary"},on:{press:e.complete}})],1)])},W=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"step-content"},[s("h4",[e._v("Winter CMS License.")]),s("p",[e._v("Let's get the boring stuff out of the way. Please read the following license and indicate that you accept its terms.")])])}],V={name:"License",mixins:[b],components:{Click:w},data:function(){return{stepId:"license",stepName:"License"}},methods:{complete:function(){this.$store.dispatch("steps/setStatus",{id:"license",status:"complete"}),this.$store.dispatch("steps/goTo",{id:"config"})}}},H=V,D=(s("fc95"),Object(u["a"])(H,M,W,!1,null,"6fb2e89a",null)),B=D.exports,F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ValidationObserver",{attrs:{slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.invalid;return[s("div",{staticClass:"step"},[s("div",{staticClass:"step-content"},[s("Tabs",{ref:"configTabs",on:{tabchanged:e.setActiveTab}},[s("Tab",{attrs:{name:"Site",active:!0}},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("ValidationProvider",{attrs:{name:"Site name",mode:"eager",rules:"required",immediate:!1,slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.dirty,i=t.invalid,n=t.errors;return[s("div",{staticClass:"form-group",class:{"has-error":a&&i}},[s("label",{staticClass:"form-label label-lg label-required",attrs:{for:"siteName"}},[e._v("Site name")]),s("small",{staticClass:"help"},[e._v(" Enter the name of your next awesome project. ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.name,expression:"site.name"}],ref:"firstField",staticClass:"form-input input-lg",attrs:{type:"text",id:"siteName",name:"siteName",placeholder:"Enter your site name",tabindex:"1",disabled:e.installing},domProps:{value:e.site.name},on:{input:function(t){t.target.composing||e.$set(e.site,"name",t.target.value)}}}),s("transition",{attrs:{name:"fade"}},[a&&n.length?s("div",{staticClass:"form-error",domProps:{textContent:e._s(n[0])}}):e._e()])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{name:"Site URL",mode:"eager",rules:"required|url",immediate:!1,slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.dirty,i=t.invalid,n=t.errors;return[s("div",{staticClass:"form-group",class:{"has-error":a&&i}},[s("label",{staticClass:"form-label label-required",attrs:{for:"siteUrl"}},[e._v("Site URL")]),s("small",{staticClass:"help"},[e._v(" Please provide a publicly-available address to your site. Make sure to include "),s("strong",[e._v("https://")]),e._v(" or "),s("strong",[e._v("http://")]),e._v(" at the beginning of your URL. ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.url,expression:"site.url"}],staticClass:"form-input",attrs:{type:"text",id:"siteUrl",name:"siteUrl",placeholder:"Enter your site URL",tabindex:"2",disabled:e.installing},domProps:{value:e.site.url},on:{input:function(t){t.target.composing||e.$set(e.site,"url",t.target.value)}}}),s("transition",{attrs:{name:"fade"}},[a&&n.length?s("div",{staticClass:"form-error",domProps:{textContent:e._s(n[0])}}):e._e()])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{name:"Backend Path",mode:"eager",rules:"backendUrl",immediate:!1,slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.dirty,i=t.invalid,n=t.errors;return[s("div",{staticClass:"form-group",class:{"has-error":a&&i}},[s("label",{staticClass:"form-label",attrs:{for:"backendUrl"}},[e._v("Backend Path")]),s("small",{staticClass:"help"},[e._v(" Provide the path that will be used to access the Backend. By default, this is "),s("strong",[e._v("backend")]),e._v(" (i.e. Backend would be accessible at https://example.com/backend). ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.backendUrl,expression:"site.backendUrl"}],staticClass:"form-input",attrs:{type:"text",id:"backendUrl",name:"backendUrl",placeholder:"Enter your backend path",tabindex:"3",disabled:e.installing},domProps:{value:e.site.backendUrl},on:{input:function(t){t.target.composing||e.$set(e.site,"backendUrl",t.target.value)}}}),s("transition",{attrs:{name:"fade"}},[a&&n.length?s("div",{staticClass:"form-error",domProps:{textContent:e._s(n[0])}}):e._e()])],1)]}}],null,!0)})],1)])]),s("Tab",{attrs:{name:"Database"}},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label",attrs:{for:"databaseType"}},[e._v("Database Type")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.site.database.type,expression:"site.database.type"}],staticClass:"form-select",attrs:{id:"databaseType",name:"databaseType",tabindex:"4",disabled:e.installing},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.site.database,"type",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"mysql"}},[e._v("MySQL / MariaDB")]),s("option",{attrs:{value:"pgsql"}},[e._v("PostgreSQL")]),s("option",{attrs:{value:"sqlsrv"}},[e._v("SQL Server")]),s("option",{attrs:{value:"sqlite"}},[e._v("SQLite")])])])]),s("div",{staticClass:"column"})]),"sqlite"!==e.site.database.type?s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("ValidationProvider",{attrs:{name:"Server Hostname",mode:"eager",rules:"required",immediate:!1,slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.dirty,i=t.invalid,n=t.errors;return[s("div",{staticClass:"form-group",class:{"has-error":a&&i}},[s("label",{staticClass:"form-label label-required",attrs:{for:"databaseHost"}},[e._v("Server Hostname")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.database.host,expression:"site.database.host"}],staticClass:"form-input",attrs:{type:"text",id:"databaseHost",name:"databaseHost",placeholder:"Enter the database server hostname",tabindex:"5",disabled:e.installing},domProps:{value:e.site.database.host},on:{input:function(t){t.target.composing||e.$set(e.site.database,"host",t.target.value)}}}),s("transition",{attrs:{name:"fade"}},[a&&n.length?s("div",{staticClass:"form-error",domProps:{textContent:e._s(n[0])}}):e._e()])],1)]}}],null,!0)}),s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label",attrs:{for:"databaseUser"}},[e._v("Username")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.database.user,expression:"site.database.user"}],staticClass:"form-input",attrs:{type:"text",id:"databaseUser",name:"databaseUser",tabindex:"7",disabled:e.installing},domProps:{value:e.site.database.user},on:{input:function(t){t.target.composing||e.$set(e.site.database,"user",t.target.value)}}})]),s("ValidationProvider",{attrs:{name:"Database Name",mode:"eager",rules:"required",immediate:!1,slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.dirty,i=t.invalid,n=t.errors;return[s("div",{staticClass:"form-group",class:{"has-error":a&&i}},[s("label",{staticClass:"form-label label-required",attrs:{for:"databaseName"}},[e._v("Database Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.database.name,expression:"site.database.name"}],staticClass:"form-input",attrs:{type:"text",id:"databaseName",name:"databaseName",placeholder:"Enter the database name",tabindex:"9",disabled:e.installing},domProps:{value:e.site.database.name},on:{input:function(t){t.target.composing||e.$set(e.site.database,"name",t.target.value)}}}),s("transition",{attrs:{name:"fade"}},[a&&n.length?s("div",{staticClass:"form-error",domProps:{textContent:e._s(n[0])}}):e._e()])],1)]}}],null,!0)})],1),s("div",{staticClass:"column"},[s("ValidationProvider",{attrs:{name:"Server Port",mode:"eager",rules:"required|integer",immediate:!1,slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.dirty,i=t.invalid,n=t.errors;return[s("div",{staticClass:"form-group",class:{"has-error":a&&i}},[s("label",{staticClass:"form-label label-required",attrs:{for:"databasePort"}},[e._v("Server Port")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.database.port,expression:"site.database.port"}],staticClass:"form-input",attrs:{type:"text",id:"databasePort",name:"databasePort",placeholder:"Enter the database server port",tabindex:"6",disabled:e.installing},domProps:{value:e.site.database.port},on:{input:function(t){t.target.composing||e.$set(e.site.database,"port",t.target.value)}}}),s("transition",{attrs:{name:"fade"}},[a&&n.length?s("div",{staticClass:"form-error",domProps:{textContent:e._s(n[0])}}):e._e()])],1)]}}],null,!0)}),s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label",attrs:{for:"databasePass"}},[e._v("Password")]),s("div",{staticClass:"input-group"},["checkbox"===(e.passwordVisible?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.database.pass,expression:"site.database.pass"}],staticClass:"form-input",attrs:{id:"databasePass",name:"databasePass",tabindex:"8",disabled:e.installing,type:"checkbox"},domProps:{checked:Array.isArray(e.site.database.pass)?e._i(e.site.database.pass,null)>-1:e.site.database.pass},on:{change:function(t){var s=e.site.database.pass,a=t.target,i=!!a.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);a.checked?r<0&&e.$set(e.site.database,"pass",s.concat([n])):r>-1&&e.$set(e.site.database,"pass",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.site.database,"pass",i)}}}):"radio"===(e.passwordVisible?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.database.pass,expression:"site.database.pass"}],staticClass:"form-input",attrs:{id:"databasePass",name:"databasePass",tabindex:"8",disabled:e.installing,type:"radio"},domProps:{checked:e._q(e.site.database.pass,null)},on:{change:function(t){return e.$set(e.site.database,"pass",null)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.database.pass,expression:"site.database.pass"}],staticClass:"form-input",attrs:{id:"databasePass",name:"databasePass",tabindex:"8",disabled:e.installing,type:e.passwordVisible?"text":"password"},domProps:{value:e.site.database.pass},on:{input:function(t){t.target.composing||e.$set(e.site.database,"pass",t.target.value)}}}),s("Click",{attrs:{label:e.passwordVisible?"Hide":"Show",addClasses:"input-group-btn",flag:"primary"},on:{press:e.togglePasswordVisibility}})],1)])],1)]):s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("p",{staticClass:"text-sm"},[e._v(" Your SQLite database will be set up in the default path for Winter CMS, which for your installation will be: "),s("br"),s("strong",{domProps:{textContent:e._s(e.installation.installPath+"/storage/database.sqlite")}})])])])]),s("Tab",{attrs:{name:"Administrator"}},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label",attrs:{for:"adminFirstName"}},[e._v("First Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.admin.firstName,expression:"site.admin.firstName"}],staticClass:"form-input",attrs:{type:"text",id:"adminFirstName",name:"adminFirstName",placeholder:"Enter the admin's first name",tabindex:"10",disabled:e.installing},domProps:{value:e.site.admin.firstName},on:{input:function(t){t.target.composing||e.$set(e.site.admin,"firstName",t.target.value)}}})]),s("ValidationProvider",{attrs:{name:"Username",mode:"eager",rules:"required|min:2|max:255",immediate:!1,slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.dirty,i=t.invalid,n=t.errors;return[s("div",{staticClass:"form-group",class:{"has-error":a&&i}},[s("label",{staticClass:"form-label label-required",attrs:{for:"adminUsername"}},[e._v("Username")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.admin.username,expression:"site.admin.username"}],staticClass:"form-input",attrs:{type:"text",id:"adminUsername",name:"adminUsername",placeholder:"Enter the admin username",tabindex:"12",disabled:e.installing},domProps:{value:e.site.admin.username},on:{input:function(t){t.target.composing||e.$set(e.site.admin,"username",t.target.value)}}}),s("transition",{attrs:{name:"fade"}},[a&&n.length?s("div",{staticClass:"form-error",domProps:{textContent:e._s(n[0])}}):e._e()])],1)]}}],null,!0)}),s("ValidationProvider",{attrs:{name:"Email Address",mode:"eager",rules:"required|email",immediate:!1,slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.dirty,i=t.invalid,n=t.errors;return[s("div",{staticClass:"form-group",class:{"has-error":a&&i}},[s("label",{staticClass:"form-label label-required",attrs:{for:"adminEmail"}},[e._v("Email Address")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.admin.email,expression:"site.admin.email"}],staticClass:"form-input",attrs:{type:"email",id:"adminEmail",name:"adminEmail",placeholder:"Enter the admin email address",tabindex:"14",disabled:e.installing},domProps:{value:e.site.admin.email},on:{input:function(t){t.target.composing||e.$set(e.site.admin,"email",t.target.value)}}}),s("transition",{attrs:{name:"fade"}},[a&&n.length?s("div",{staticClass:"form-error",domProps:{textContent:e._s(n[0])}}):e._e()])],1)]}}],null,!0)})],1),s("div",{staticClass:"column"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label",attrs:{for:"adminLastName"}},[e._v("Surname")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.admin.lastName,expression:"site.admin.lastName"}],staticClass:"form-input",attrs:{type:"text",id:"adminLastName",name:"adminLastName",placeholder:"Enter the admin's surname",tabindex:"11",disabled:e.installing},domProps:{value:e.site.admin.lastName},on:{input:function(t){t.target.composing||e.$set(e.site.admin,"lastName",t.target.value)}}})]),s("ValidationProvider",{attrs:{name:"Password",mode:"eager",rules:"required|min:4",immediate:!1,slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.dirty,i=t.invalid,n=t.errors;return[s("div",{staticClass:"form-group",class:{"has-error":a&&i}},[s("label",{staticClass:"form-label label-required",attrs:{for:"adminPassword"}},[e._v("Password")]),s("div",{staticClass:"input-group"},["checkbox"===(e.passwordVisible?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.admin.password,expression:"site.admin.password"}],staticClass:"form-input",attrs:{id:"adminPassword",name:"adminPassword",placeholder:"Enter the admin's password",tabindex:"13",disabled:e.installing,type:"checkbox"},domProps:{checked:Array.isArray(e.site.admin.password)?e._i(e.site.admin.password,null)>-1:e.site.admin.password},on:{change:function(t){var s=e.site.admin.password,a=t.target,i=!!a.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);a.checked?r<0&&e.$set(e.site.admin,"password",s.concat([n])):r>-1&&e.$set(e.site.admin,"password",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.site.admin,"password",i)}}}):"radio"===(e.passwordVisible?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.admin.password,expression:"site.admin.password"}],staticClass:"form-input",attrs:{id:"adminPassword",name:"adminPassword",placeholder:"Enter the admin's password",tabindex:"13",disabled:e.installing,type:"radio"},domProps:{checked:e._q(e.site.admin.password,null)},on:{change:function(t){return e.$set(e.site.admin,"password",null)}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:e.site.admin.password,expression:"site.admin.password"}],staticClass:"form-input",attrs:{id:"adminPassword",name:"adminPassword",placeholder:"Enter the admin's password",tabindex:"13",disabled:e.installing,type:e.passwordVisible?"text":"password"},domProps:{value:e.site.admin.password},on:{input:function(t){t.target.composing||e.$set(e.site.admin,"password",t.target.value)}}}),s("Click",{attrs:{label:e.passwordVisible?"Hide":"Show",addClasses:"input-group-btn",flag:"primary"},on:{press:e.togglePasswordVisibility}})],1),s("transition",{attrs:{name:"fade"}},[a&&n.length?s("div",{staticClass:"form-error",domProps:{textContent:e._s(n[0])}}):e._e()])],1)]}}],null,!0)})],1)])])],1)],1),s("div",{staticClass:"step-actions"},["Site"===e.activeTab?s("Click",{attrs:{label:"Enter database configuration",flag:"primary"},on:{press:function(t){return e.$refs.configTabs.setActiveTabByName("Database")}}}):"Database"===e.activeTab?s("Click",{attrs:{label:"Enter administrator details",flag:"primary"},on:{press:function(t){return e.$refs.configTabs.setActiveTabByName("Administrator")}}}):s("Click",{attrs:{label:"Begin final checks",flag:"primary",disabled:a},on:{press:e.complete}})],1)])]}}])})},G=[],Y=s("5530"),z=(s("b0c0"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tabs-container"},[s("TabNav",{ref:"tabNav",attrs:{tabs:e.tabs},on:{tabchange:e.setActiveTab}}),s("div",{staticClass:"tab-panes"},[e._t("default")],2)],1)}),J=[],K=(s("c740"),s("a434"),s("d81d"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"tab tab-block"},e._l(e.tabs,(function(t,a){return s("li",{key:a,staticClass:"tab-item",class:{active:e.isActiveTab(a)}},[s("a",{attrs:{href:"#"},domProps:{textContent:e._s(t)},on:{click:function(t){return t.preventDefault(),e.setTab(a)}}})])})),0)}),Q=[],Z={name:"TabNav",props:{tabs:{type:[Object,Array],required:!0},default:{type:String}},data:function(){return{active:null}},mounted:function(){this.default&&void 0!==this.tabs[this.default]?this.active=this.default:Array.isArray(this.tabs)?this.active="tab-0":this.active=this.tabs[Object.keys(this.tabs)[0]],this.$emit("tabchange",this.active)},methods:{formattedKey:function(e){return Array.isArray(this.tabs)?"tab-"+e:e},isActiveTab:function(e){return this.active===this.formattedKey(e)},setTab:function(e){this.active=this.formattedKey(e),this.$emit("tabchange",this.active)}}},X=Z,ee=(s("6055"),Object(u["a"])(X,K,Q,!1,null,null,null)),te=ee.exports,se=new a["a"]({data:function(){return{tabs:[],activeTab:null,tabCount:0}},methods:{addTab:function(e){this.tabs.push(e),this.tabCount+=1,!0===e.isActive&&this.setActiveTab(e)},findTab:function(e){return this.tabs.findIndex((function(t){return t===e}))},setActiveTab:function(e){var t=this.findTab(e);-1!==t&&(this.activeTab=t),this.refreshTabActiveStates()},setActiveTabByKey:function(e,t){this.activeTab=e,this.refreshTabActiveStates(),t.$emit("tabchanged",this.tabs[e])},removeTab:function(e){var t=this.findTab(e);-1!==t&&(this.tabs.splice(t,1),this.tabCount-=1)},refreshTabActiveStates:function(){var e=this;this.tabs.forEach((function(t,s){t.isActive=!1,e.activeTab===s&&(t.isActive=!0)}))}}}),ae={name:"Tabs",provide:{$tabs:se},components:{TabNav:te},computed:{tabs:function(){return se.tabs.map((function(e){return e.name}))}},methods:{setActiveTab:function(e){se.setActiveTabByKey(Number(e.replace("tab-","")),this)},setActiveTabByName:function(e){var t=this.tabs.indexOf(e);-1!==t&&this.$refs.tabNav.setTab(t)}}},ie=ae,ne=(s("6f10"),Object(u["a"])(ie,z,J,!1,null,null,null)),re=ne.exports,oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"tab-pane",class:{attached:e.attached}},[e._t("default")],2)},ce=[],le={name:"Tab",inject:{$tabs:{from:"$tabs",default:null}},props:{name:{type:String,required:!0},active:{type:Boolean,default:!1},attached:{type:Boolean,default:!1}},watch:{active:function(e){this.isActive=e}},data:function(){return{isActive:this.active}},mounted:function(){this.$tabs&&this.$tabs.addTab(this)},destroyed:function(){this.$tabs&&this.$tabs.removeTab(this)}},de=le,ue=Object(u["a"])(de,oe,ce,!1,null,null,null),pe=ue.exports,me=s("7bb1"),he=s("4c93");Object(me["c"])("required",Object(Y["a"])(Object(Y["a"])({},he["e"]),{},{message:"{_field_} is required."})),Object(me["c"])("email",Object(Y["a"])(Object(Y["a"])({},he["a"]),{},{message:"{_field_} must be a valid email."})),Object(me["c"])("integer",Object(Y["a"])(Object(Y["a"])({},he["b"]),{},{message:"{_field_} must be a number."})),Object(me["c"])("min",Object(Y["a"])(Object(Y["a"])({},he["d"]),{},{message:"{_field_} must be at least {length} characters."})),Object(me["c"])("max",Object(Y["a"])(Object(Y["a"])({},he["c"]),{},{message:"{_field_} must be at most {length} characters."})),Object(me["c"])("backendUrl",(function(e){var t=/^[-a-zA-Z0-9()@:%_+.~#=]*$/;return!!t.test(e)||"Invalid backend URL keyword."})),Object(me["c"])("url",(function(e){var t=/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}(\.[a-zA-Z0-9()]{1,6})*\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)$/;return!!t.test(e)||"Invalid URL provided"}));var fe={name:"Configuration",mixins:[b],components:{Click:w,Tabs:re,Tab:pe,ValidationProvider:me["b"],ValidationObserver:me["a"]},props:{site:{type:Object,required:!0},installation:{type:Object,required:!0}},computed:{isActive:function(){return this.$store.getters["steps/isActive"](this.stepId)},installing:function(){return this.installation.installing}},data:function(){return{stepId:"config",stepName:"Configuration",firstView:!0,activeTab:"Site",passwordVisible:!1}},watch:{isActive:function(e){e&&this.firstView&&(this.firstView=!1,this.$refs.firstField.focus())}},methods:{setActiveTab:function(e){e&&(this.activeTab=e.name)},togglePasswordVisibility:function(){this.passwordVisible=!this.passwordVisible},complete:function(){this.$store.dispatch("steps/setStatus",{id:"config",status:"complete"}),this.$store.dispatch("steps/goTo",{id:"finalChecks"})}}},be=fe,ve=(s("e23c"),Object(u["a"])(be,F,G,!1,null,"3bd837ac",null)),ge=ve.exports,ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"step"},[e._m(0),s("div",{staticClass:"checks"},[s("Check",{attrs:{name:"Database connection",description:e.checkDescription("database"),status:e.checkStatus("database")}}),s("Check",{attrs:{name:"Directory is writable",description:e.checkDescription("writable"),status:e.checkStatus("writable")}})],1),s("div",{staticClass:"step-actions"},[s("Click",{attrs:{label:e.buttonLabel,size:e.completedChecks&&e.checksSuccessful?"lg":"md",flag:e.completedChecks&&!e.checksSuccessful?"error":"success",disabled:!e.completedChecks},on:{press:e.onPress}})],1)])},Ce=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"step-content"},[s("h4",[e._v("Last checks.")]),s("p",[e._v("To ensure that Winter CMS can install and run with your configuration, we're doing some final checks.")])])}],ye={name:"FinalChecks",mixins:[b],components:{Click:w,Check:j},props:{site:{type:Object,required:!0}},computed:{buttonLabel:function(){return this.completedChecks?this.checksSuccessful?"Begin the installation":"Re-run checks":"Running checks..."},isActive:function(){return this.$store.getters["steps/isActive"](this.stepId)}},data:function(){return{stepId:"finalChecks",stepName:"Final Checks",ranChecks:!1,completedChecks:!1,checksSuccessful:!1,checks:{}}},mounted:function(){this.resetChecks()},watch:{isActive:function(e){e&&!this.ranChecks&&this.runChecks()},"site.database":{deep:!0,handler:function(){this.resetChecks()}}},methods:{checkDescription:function(e){return this.checks[e]?this.checks[e].description:""},checkStatus:function(e){return this.checks[e]&&null!==this.checks[e].status?!1===this.checks[e].status?"error":"success":"loading"},runChecks:function(){var e=this;this.ranChecks=!0,Promise.all([this.$api("POST","checkDatabase",{site:this.site}),this.$api("GET","checkWriteAccess")]).then((function(t){e.completedChecks=!0,e.checksSuccessful=t.every((function(e){return!0===e.success})),e.checks.database.status=t[0].success,e.checks.writable.status=t[1].success,t[0].success?e.checks.database.description="We were successfully able to connect to the database.":t[0].data.dbNotEmpty?e.checks.database.description="The database you are installing to is not empty. Please delete all tables within this database before proceeding.":e.checks.database.description="We could not connect to the database. Please check your database settings.",t[1].success?e.checks.writable.description="The folder you are installing into is writable.":e.checks.writable.description="The folder you are installing into is not writable. Please check the permissions and ownership of the folder."}),(function(){e.completedChecks=!0,Object.keys(e.checks).forEach((function(t){e.checks[t].status=!1,e.checks[t].description="An error occurred querying the installer's PHP API. We cannot complete this check. Please double-check that your server has PHP installed and is web-accessible."}))}))},onPress:function(){this.checksSuccessful?this.complete():this.rerunChecks()},rerunChecks:function(){this.resetChecks(),this.runChecks()},resetChecks:function(){this.ranChecks=!1,this.completedChecks=!1,this.checksSuccessful=!1,this.checks={database:{status:null,description:"Check that we can connect to the database using the provided configuration."},writable:{status:null,description:"Check that your current project folder is writable."}}},complete:function(){this.$store.dispatch("steps/setStatus",{id:"finalChecks",status:"complete"}),this.$store.dispatch("steps/goTo",{id:"installation"})}}},we=ye,Se=(s("13ef"),Object(u["a"])(we,ke,Ce,!1,null,"69e8cdf4",null)),_e=Se.exports,Pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"step text-center"},[s("div",{staticClass:"step-content"},[s("transition",{attrs:{name:"fade",mode:"out-in"}},[e.errored?s("div",{staticClass:"danger-logo"}):s("div",{staticClass:"circle-logo"})]),s("h3",[e._v("Installing Winter CMS")]),s("p",[e._v("This process may take a minute or two. Please do not close the window.")]),s("div",{staticClass:"bar bar-lg",class:{"bar-error":e.errored}},[s("div",{staticClass:"bar-item",style:{width:e.progress},attrs:{role:"progressbar"}})]),s("transition",{attrs:{name:"fade",mode:"out-in"}},[e.errored?s("div",{staticClass:"error"},[s("p",[e._v(" Sorry, but an error has occurred while trying to install Winter CMS. ")]),s("p",[s("strong",{domProps:{textContent:e._s(e.error)}})])]):s("div",{staticClass:"install-steps"},[s("transition-group",{attrs:{name:"install-step",tag:"ul"}},e._l(e.actioned,(function(t){return s("li",{key:t,staticClass:"install-step-item",domProps:{textContent:e._s(t)}})})),0)],1)])],1)])},xe=[],Ae=s("1da1"),Te=(s("96cf"),{name:"Installation",mixins:[b],props:{site:{type:Object,required:!0},installation:{type:Object,required:!0}},computed:{isActive:function(){return this.$store.getters["steps/isActive"](this.stepId)},progress:function(){return Math.ceil(this.actioned.length/Object.keys(this.apiSteps).length*100)+"%"}},data:function(){return{stepId:"installation",stepName:"Installation",begun:!1,errored:!1,error:null,apiSteps:{downloadWinter:"Downloading Winter CMS",extractWinter:"Extracting Winter CMS",lockDependencies:"Determining dependencies",installDependencies:"Installing dependencies",setupConfig:"Configuring site",runMigrations:"Running database migrations",createAdmin:"Create administrator account",cleanUp:"Cleaning up"},actioned:[]}},watch:{isActive:function(e){e&&!this.begun&&this.install()}},methods:{install:function(){var e=this;return Object(Ae["a"])(regeneratorRuntime.mark((function t(){var s,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.begun=!0,e.installation.installing=!0,s=0,a=Object.keys(e.apiSteps);case 3:if(!(s<a.length)){t.next=18;break}return i=a[s],e.actioned.unshift(e.apiSteps[i]),t.prev=6,t.next=9,e.installStep(i);case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t["catch"](6),e.setError(t.t0),t.abrupt("return");case 15:s++,t.next=3;break;case 18:e.complete();case 19:case"end":return t.stop()}}),t,null,[[6,11]])})))()},installStep:function(e){var t=this;return new Promise((function(s,a){t.$api("POST",e,{site:t.site}).then((function(e){e.success&&s(),a(e.error)}),(function(e){a(e)}))}))},setError:function(e){this.errored=!0,this.error=e},complete:function(){this.$store.dispatch("steps/setStatus",{id:"installation",status:"complete"}),this.$store.dispatch("steps/goTo",{id:"complete"})}}}),Ee=Te,Oe=(s("f03c"),Object(u["a"])(Ee,Pe,xe,!1,null,"81ebb1a8",null)),Ne=Oe.exports,$e=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"step text-center"},[e._m(0),s("div",{staticClass:"step-actions"},[s("a",{staticClass:"btn btn-primary",attrs:{href:e.siteUrl,target:"wintercms"}},[e._v(" View your install ")]),s("a",{staticClass:"btn btn-primary",attrs:{href:e.backendUrl,target:"backend"}},[e._v(" View your Backend ")])])])},Ie=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"step-content"},[s("div",{staticClass:"success-logo"}),s("h3",[e._v("Winter CMS is now installed!")]),s("p",[e._v("Your new installation is ready to go. We hope you enjoy using Winter CMS!")])])}],je={name:"Complete",mixins:[b],props:{site:{type:Object,required:!0}},computed:{siteUrl:function(){return this.site.url},backendUrl:function(){return this.site.url+"/"+this.site.backendUrl}},data:function(){return{stepId:"complete",stepName:"Complete"}}},Le=je,qe=(s("a46b"),Object(u["a"])(Le,$e,Ie,!1,null,"10670d75",null)),Re=qe.exports,Ue={name:"Installer",components:{Sidebar:m,Introduction:x,Checks:U,License:B,Configuration:ge,FinalChecks:_e,Installation:Ne,Complete:Re},data:function(){return{installation:{installing:!1,installPath:null},site:{name:"",url:this.defaultUrl(),backendUrl:"backend",database:{type:"mysql",host:"localhost",port:3306,username:"",password:"",name:""},admin:{firstName:"",lastName:"",email:"",username:"",password:""}}}},mounted:function(){this.$store.dispatch("steps/goTo",{id:"intro"})},watch:{"site.database.type":{handler:function(e,t){var s={mysql:3306,pgsql:5432,sqlsrv:1433};Number(this.site.database.port)!==s[t]&&"sqlite"!==t||(this.site.database.port=s[e])}}},methods:{isStepActive:function(e){return this.$store.getters["steps/isActive"](e)},defaultUrl:function(){return window.location.protocol+"//"+window.location.host+window.location.pathname.replace("/install.html","")}}},Me=Ue,We=(s("0e7c"),Object(u["a"])(Me,i,n,!1,null,null,null)),Ve=We.exports,He=(s("7db0"),{namespaced:!0,state:{steps:[]},mutations:{add:function(e,t){e.steps.push(t)},remove:function(e,t){e.steps.splice(t.key,1)},changeStatus:function(e,t){e.steps[t.key].status=t.status},setActive:function(e,t){e.steps.forEach((function(e){e.active=!1})),e.steps[t.key].active=!0}},getters:{getStepById:function(e){return function(t){return e.steps.findIndex((function(e){return e.id===t}))}},isLocked:function(e){return function(t){return 0!==e.steps.length&&(!!e.steps.find((function(e){return e.id===t}))&&"locked"===e.steps.find((function(e){return e.id===t})).status)}},isActive:function(e){return function(t){return 0!==e.steps.length&&(!!e.steps.find((function(e){return e.id===t}))&&e.steps.find((function(e){return e.id===t})).active)}}},actions:{add:function(e,t){var s=e.commit;s("add",{id:t.id,name:t.name,status:"locked",active:!1})},remove:function(e,t){var s=e.getters,a=e.commit;t.key?a("remove",{key:t.key}):a("remove",{key:s.getStepById(t.id)})},goTo:function(e,t){var s=e.getters,a=e.commit;if(t.key)return s.isLocked(t.key)&&a("changeStatus",{key:t.key,status:"pending"}),void a("setActive",{key:t.key});s.isLocked(t.id)&&a("changeStatus",{key:s.getStepById(t.id),status:"pending"}),a("setActive",{key:s.getStepById(t.id)})},setStatus:function(e,t){var s=e.getters,a=e.commit;t.key?a("changeStatus",{key:t.key,status:t.status}):a("changeStatus",{key:s.getStepById(t.id),status:t.status})}}});a["a"].use(c["a"]);var De=new c["a"].Store({modules:{steps:He}}),Be=s("53ca"),Fe=(s("99af"),{install:function(e){e.prototype.$api=function(e,t,s){if("string"!==typeof e||-1===["GET","POST"].indexOf(e))throw new Error("Invalid method for API call, must be one of: GET, POST");if("string"!==typeof t)throw new Error("Endpoint must be provided as a string");var a="api.php",i="./install";a="/"!==a.substr(-1,1)?"".concat(i,"/").concat(a):"".concat(i).concat(a);var n=null;if("GET"===e){if(a="".concat(a,"?endpoint=").concat(t),s&&!Array.isArray(s))throw new Error("Data must be provided as an array");if(s&&s.length){var r=s.join("&");a="".concat(a,"&").concat(r)}}else{if(s&&"object"!==Object(Be["a"])(s))throw new Error("Data must be provided as an object");s.endpoint=t,n=JSON.stringify(s)}return new Promise((function(t,s){fetch(a,{method:e,body:n}).then((function(e){e.ok?e.json().then((function(e){e.success?t({success:!0,data:e.data||null}):t({success:!1,error:e.error,data:e.data||null})}),(function(){s(new Error("Unable to parse JSON response"))})):e.json().then((function(e){t({success:!1,error:e.error,data:e.data||null})}),(function(){s(new Error("Unable to parse JSON response"))}))}),(function(){s(new Error("An unknown AJAX error occured."))}))}))}}});a["a"].config.productionTip=!1,a["a"].use(Fe),new a["a"]({store:De,render:function(e){return e(Ve)}}).$mount("#app")},5971:function(e,t,s){e.exports=s.p+"install/assets/img/sidebar-logo.f0978739.png"},6055:function(e,t,s){"use strict";s("fff0")},"6f10":function(e,t,s){"use strict";s("75aa")},"6f4c":function(e,t,s){},"75aa":function(e,t,s){},8745:function(e,t,s){"use strict";s("a768")},"8d98":function(e,t,s){},9741:function(e,t,s){},9950:function(e,t,s){},"9c7f":function(e,t,s){},a46b:function(e,t,s){"use strict";s("9950")},a768:function(e,t,s){},b378:function(e,t,s){},ba36:function(e,t,s){"use strict";s("8d98")},e23c:function(e,t,s){"use strict";s("6f4c")},f03c:function(e,t,s){"use strict";s("55ba")},f203:function(e,t,s){"use strict";s("9741")},f54a:function(e,t,s){"use strict";s("b378")},f5a0:function(e,t,s){},f651:function(e,t,s){},fc95:function(e,t,s){"use strict";s("06c7")},fff0:function(e,t,s){}});